# –ù—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã.
# –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã
# 1. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã–º —Å–æ–∑–¥–∞–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –¥–∏—Ä–µ—Ç–æ—Ä–∏–π, —Ç–æ –µ—Å—Ç—å, 
# "aa–∞", "aaa/bbb", "a–∞–∞/—Å—Å—Å", "aa–∞/bbb/cc—Å". –ü—Ä–∏—á—ë–º "aa–∞/—Å—Å—Å", "aa–∞/bbb/c—Å—Å" - —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –¥–∏—Ä–µ—Ç–æ—Ä–∏–∏.
# 2. –í—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∏ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º.
# 3. –ó–∞–ø–∏—Å–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤ —Ñ–∞–π–ª —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º. –ü—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å–∏ —Ñ–∞–π–ª —Å–æ–∑–¥–∞—ë—Ç—Å—è. 
# –ü—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞. –§–∞–π–ª—ã "1.txt", "aa–∞/1.txt". "aaa/bbb/1.txt" —Ä–∞–∑–Ω—ã–µ, 
# —Ç–∞–∫ –∫–∞–∫ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö.
# 4. –ü—Ä–æ—á–µ—Å—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.
# –ò–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–±—â–µ–π –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. 
# –í –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –ø—É—Ç–∏ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —É–¥–æ–±–Ω–µ–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª "/".
# –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —Ç–∞–∫, —á—Ç–æ–±—ã —É –≤–∞—Å –Ω–µ –±—ã–ª–æ –æ–±—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ –∏–ª–∏ —Å–ª–æ–≤–∞—Ä—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ, 
# –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏ —Å–≤–æ–∏ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ —Ñ–∞–π–ª—ã, –∫–∞–∫ –≤ –Ω–∞—Å—Ç–æ—è—â–∏—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.
# —Ç–∞–∫ –∂–µ –Ω–∞–ø–∏—à–∏ –∫–æ–¥ –Ω–∞ –ø–∏—Ç–æ–Ω–µ, –¥–æ–±–∞–≤—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –ø–∏—à–∏ —Ç–∞–∫, –±—É–¥—Ç–æ —Ç—ã —Å—Ç—É–¥–µ–Ω—Ç, 
# –∫–æ—Ç–æ—Ä—ã–π –∏–∑—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏


# –ö–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π —Ñ–∞–π–ª
class File:
    def __init__(self, name):
        self.name = name
        self.content = ""  # —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞

# –ö–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (–ø–∞–ø–∫—É)
class Directory:
    def __init__(self, name):
        self.name = name
        self.subdirectories = {}  # —Å–ª–æ–≤–∞—Ä—å: –∏–º—è -> Directory
        self.files = {}           # —Å–ª–æ–≤–∞—Ä—å: –∏–º—è -> File

# –ö–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –≤—Å—é —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
class FileSystem:
    def __init__(self):
        self.root = Directory("/")  # –∫–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è

    # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –Ω–∞—Ö–æ–¥–∏—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–æ –ø—É—Ç–∏
    def _traverse(self, path):
        parts = [p for p in path.strip("/").split("/") if p]
        current = self.root
        for part in parts:
            if part not in current.subdirectories:
                return None
            current = current.subdirectories[part]
        return current

    # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è: —Å–æ–∑–¥–∞—Ç—å –ø—É—Ç—å, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –ø–∞–ø–∫–∏
    def _create_path(self, path):
        parts = [p for p in path.strip("/").split("/") if p]
        current = self.root
        for part in parts:
            if part not in current.subdirectories:
                current.subdirectories[part] = Directory(part)
            current = current.subdirectories[part]
        return current

    # –ö–æ–º–∞–Ω–¥–∞ 1: —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (–≤–∫–ª—é—á–∞—è –≤–ª–æ–∂–µ–Ω–Ω—ã–µ)
    def create_directory(self, path):
        self._create_path(path)
        print(f"üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è '{path}' —Å–æ–∑–¥–∞–Ω–∞.")

    # –ö–æ–º–∞–Ω–¥–∞ 2: –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    def list_directory(self, path):
        dir_obj = self._traverse(path)
        if dir_obj is None:
            print(f"‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è '{path}' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.")
            return
        print(f"\nüìÇ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ '{path}':")
        print("–ü–∞–ø–∫–∏:")
        for name in dir_obj.subdirectories:
            print("  üìÅ", name)
        print("–§–∞–π–ª—ã:")
        for name in dir_obj.files:
            print("  üìÑ", name)

    # –ö–æ–º–∞–Ω–¥–∞ 3: –∑–∞–ø–∏—Å–∞—Ç—å –≤ —Ñ–∞–π–ª (—Å–æ–∑–¥–∞—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å)
    def write_file(self, path, content):
        parts = path.strip("/").split("/")
        file_name = parts[-1]
        dir_path = "/".join(parts[:-1])

        dir_obj = self._create_path(dir_path)  # —Å–æ–∑–¥–∞—ë–º –ø—É—Ç—å, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

        if file_name not in dir_obj.files:
            dir_obj.files[file_name] = File(file_name)

        dir_obj.files[file_name].content = content
        print(f"‚úÖ –§–∞–π–ª '{path}' –∑–∞–ø–∏—Å–∞–Ω.")

    # –ö–æ–º–∞–Ω–¥–∞ 4: –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
    def read_file(self, path):
        parts = path.strip("/").split("/")
        file_name = parts[-1]
        dir_path = "/".join(parts[:-1])

        dir_obj = self._traverse(dir_path)
        if dir_obj is None or file_name not in dir_obj.files:
            print(f"‚ùå –§–∞–π–ª '{path}' –Ω–µ –Ω–∞–π–¥–µ–Ω.")
            return

        print(f"\nüìñ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ '{path}':")
        print(dir_obj.files[file_name].content)

# ----------------------------
# –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å —Å–∏—Å—Ç–µ–º–æ–π
# ----------------------------

def main():
    fs = FileSystem()

    while True:
        print("\n–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:")
        print("1. mkdir <–ø—É—Ç—å> ‚Äî —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é")
        print("2. ls <–ø—É—Ç—å> ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏")
        print("3. write <–ø—É—Ç—å_–∫_—Ñ–∞–π–ª—É> ‚Äî –∑–∞–ø–∏—Å–∞—Ç—å –≤ —Ñ–∞–π–ª")
        print("4. read <–ø—É—Ç—å_–∫_—Ñ–∞–π–ª—É> ‚Äî –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª")
        print("5. exit ‚Äî –≤—ã—Ö–æ–¥\n")

        command = input("–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: ").strip()
        if command == "exit":
            break

        parts = command.split(maxsplit=1)
        if not parts:
            continue

        cmd = parts[0]

        if cmd == "mkdir" and len(parts) > 1:
            fs.create_directory(parts[1])
        elif cmd == "ls" and len(parts) > 1:
            fs.list_directory(parts[1])
        elif cmd == "write" and len(parts) > 1:
            path = parts[1]
            content = input("–í–≤–µ–¥–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞: ")
            fs.write_file(path, content)
        elif cmd == "read" and len(parts) > 1:
            fs.read_file(parts[1])
        else:
            print("‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—É—Ç—å.")

if __name__ == "__main__":
    main()
